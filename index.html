<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Lei's blog</title><meta name="description" content="A Blog Powered By Hexo"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yoursite.com/atom.xml" title="Lei's blog"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link active">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/leizhang233" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/zhanglei12345" target="_blank" class="nav-list-link">GITHUB</a></li></ul></header><main class="container"><ul class="home post-list"><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2019/01/17/Docker部署MySQL并实现远程连接/" class="post-title-link">Docker 部署 MySQL 并实现远程连接</a></h2><div class="post-info">Jan 17, 2019</div><div class="post-content"><h3 id="Docker-部署-MySQL"><a href="#Docker-部署-MySQL" class="headerlink" title="Docker 部署 MySQL"></a>Docker 部署 MySQL</h3><p>下载官方镜像：<br><code>docker pull mysql</code></p>
<p>列出镜像：<br><code>docker image ls</code></p>
<p>创建主机存储目录：<br><code>cd &amp;&amp; mkdir mysql-data mysql-conf &amp;&amp; cd mysql-conf</code></p>
<p>建立 mysql 配置文件，暂时将配置设置为跟容器构建时的配置一致，<code>vi config-file.cnf</code>：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">skip-host-cache</span><br><span class="line">skip-name-resolve</span><br></pre></td></tr></table></figure></p>
<p>启动容器：<br><code>docker run --name mysql --restart=always -v /home/user/mysql-conf:/etc/mysql/conf.d -v /home/user/mysql-data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=my-secret-pw -d -P mysql:latest</code></p>
<p>进入 mysql 容器：<br><code>docker exec -it mysql bash</code></p>
<p>连接 mysql 数据库：<br><code>mysql -uroot -p</code></p>
<p>新建 mysql 用户：<br><code>create user &#39;mysql-user&#39;@&#39;%&#39; identified by &#39;mysql-pwd&#39;;</code></p>
<p>新建数据库：<br><code>create database testbase;</code></p>
<p>赋用户权限：<br><code>grant all privileges on testbase.* to &#39;mysql-user&#39;@&#39;%&#39;;</code></p>
<p>立即生效：<br><code>flush privileges;</code></p></div><a href="/2019/01/17/Docker部署MySQL并实现远程连接/" class="read-more">...阅读全文</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2019/01/16/初入Ubuntu的一些操作/" class="post-title-link">初入 Ubuntu 的一些操作</a></h2><div class="post-info">Jan 16, 2019</div><div class="post-content"><h3 id="查看系统版本"><a href="#查看系统版本" class="headerlink" title="查看系统版本"></a>查看系统版本</h3><p><code>cat /etc/os-release</code></p>
<h3 id="修改-root-密码"><a href="#修改-root-密码" class="headerlink" title="修改 root 密码"></a>修改 root 密码</h3><p><code>passwd</code></p>
<h3 id="新建用户"><a href="#新建用户" class="headerlink" title="新建用户"></a>新建用户</h3><p>新建用户：</p>
<p><code>adduser username</code></p>
<p>将新用户加入 sudo 组,这样就可以用 sudo 命令了：</p>
<p><code>gpasswd sudo -a username</code></p>
<blockquote>
<p>若不执行此操作，执行 sudo 命令时，会提示 username is not in the sudoers file.  This incident will be reported.</p>
</blockquote>
<h3 id="更改-ssh-默认端口"><a href="#更改-ssh-默认端口" class="headerlink" title="更改 ssh 默认端口"></a>更改 ssh 默认端口</h3><p><code>sudo vi /etc/ssh/sshd_config</code> ，修改 Port 自定义端口号，之后重启 ssh 服务：<code>sudo systemctl restart sshd.service</code> ，根据自己需要看是否禁止 root 用户登录，修改配置文件：<code>PermitRootLogin no</code>，之后重启 ssh 服务。</p></div><a href="/2019/01/16/初入Ubuntu的一些操作/" class="read-more">...阅读全文</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2018/08/23/Hexo搭建/" class="post-title-link">入门 Hexo 博客搭建</a></h2><div class="post-info">Aug 23, 2018</div><div class="post-content"><p>由于个人博客之前一直是搭在 VPS 上的，可看我的另一篇博客 <a href="https://haoleio.com/2017/08/11/VPS%E4%B8%8A%E6%90%AD%E5%BB%BATypecho/" target="_blank" rel="noopener">VPS 上搭建 Typecho</a>，同时自己的 .me 域名到期续费太贵就没继续用了，索性将博客全部迁移至 Github Pages，绑定了新的域名。1 年时间也没水几篇博客，逃！下面记录下自己搭建的流程吧，总的来说挺简单的。</p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>参照 <a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="noopener">Hexo 官网</a>进行安装:</p>
<pre><code>`npm install -g hexo-cli`
</code></pre><h3 id="建站"><a href="#建站" class="headerlink" title="建站"></a>建站</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo init username.github.io</span><br><span class="line"><span class="built_in">cd</span> username.github.io</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>
<p>主题自己使用的 <a href="https://github.com/pinggod/hexo-theme-apollo.git" target="_blank" rel="noopener">apollo</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install --save hexo-renderer-jade hexo-generator-feed hexo-generator-sitemap hexo-browsersync hexo-generator-archive</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/pinggod/hexo-theme-apollo.git themes/apollo</span><br></pre></td></tr></table></figure>
<p>Hexo 3.0 把服务器独立成了个别模块，您必须先安装 hexo-server 才能使用，后续 git 方式部署需要用到。</p>
<p><code>npm install hexo-deployer-git --save</code></p></div><a href="/2018/08/23/Hexo搭建/" class="read-more">...阅读全文</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2018/08/19/入手折腾SamsungChromebookPro/" class="post-title-link">入手折腾 Samsung Chromebook Pro</a></h2><div class="post-info">Aug 19, 2018</div><div class="post-content"><p>前段时间被 Chromebook 吸引，入手了一款 Samsung Chromebook Pro,具体配置可自行 google，下面对折腾记录一下。</p>
<h2 id="登录"><a href="#登录" class="headerlink" title="登录"></a>登录</h2><p>Chromebook 开机登录需要 google 帐号，自己通过在树莓派上搭建的可自由上网的路由器搞定，登录入系统后可通过 play store 下载 shadowsocks，挂代理后就不需要一直连接树莓派了(由于目前只搭建了全局，还没做优化)，连接上任一 wifi 即可。</p>
<h2 id="进入开发者模式"><a href="#进入开发者模式" class="headerlink" title="进入开发者模式"></a>进入开发者模式</h2><p>按住 Esc 键和刷新(F3)按键，然后按住 Power 按钮，调用 Recovery 模式。<br>出现 Recovery 屏幕后，按 Ctrl + D。该操作没有提示，因此只需完成即可。此后，系统会提示确认并重新启动以进入开发者模式。</p>
<p><strong>注：进入开发者模式会清空用户数据，注意备份</strong>。要跳过 OS 加载屏幕，请等待30秒，或者按 Ctrl + D，Chromebook 将继续启动。</p>
<p>进入开发者模式后，就可以自己下载 APK 文件进行应用安装了。</p>
<h2 id="利用-crouton-安装-Ubuntu"><a href="#利用-crouton-安装-Ubuntu" class="headerlink" title="利用 crouton 安装 Ubuntu"></a>利用 crouton 安装 Ubuntu</h2><p>进入开发者模式后，还可以基于 crouton 安装 Ubuntu，操作如下：</p>
<ol>
<li>从 <a href="https://goo.gl/fd3zc" target="_blank" rel="noopener">https://goo.gl/fd3zc</a> 下载最新的 crouton 版本，放到 ~/Download 目录下</li>
<li>打开 Chrome，键入 Ctrl + Alt + T，进入 shell 界面，输入 shell 并回车</li>
<li>执行： sudo sh ~/Downloads/crouton -t xfce ，也可以安装其他桌面(该过程需要连接树莓派的网络，否则会出现某个源下载不了导致失败)</li>
<li>安装完成之后即可进入桌面：sudo enter-chroot 进入终端，sudo startxfce4 进入图形界面</li>
<li>在 Chrome os 和 Ubuntu 之间进行切换：从 C 到 U，shift + ctrl + alt + 前进键，从 U 到<br>C，shift + ctrl + alt + 后退键</li>
<li>之后就可以畅快的玩耍 Chrome os 和 Ubuntu了。</li>
</ol></div><a href="/2018/08/19/入手折腾SamsungChromebookPro/" class="read-more">...阅读全文</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2018/08/17/在Telegram收发微信消息/" class="post-title-link">在 Telegram 收发微信消息</a></h2><div class="post-info">Aug 17, 2018</div><div class="post-content"><p>开发代号 <a href="https://github.com/blueset/ehForwarderBot" target="_blank" rel="noopener">EH Forwarder Bot</a>（简称 EFB）是一个可扩展的聊天平台隧道框架，基于 Python 3。目前已内置了 Telegram 主端 (Master Channel) 和微信从端 (Slave Channel)，用来在 Telegram 收发微信消息。</p>
<p>本文介绍了如何在 VPS(Ubuntu 16.04) 中安装并配置 EFB、Telegram 主端和微信从端，以及如何使用 Telegram 主端来收发微信消息。自己用了将近一个月了，体验很棒，尤其是丰富便捷的表情包，可以悄悄告诉你这种方式自带消息防撤回功能，不过需要注意的是这种登录方式是基于网页微信版本的，功能受限制，登录mac版本的微信后也会把其顶掉。</p>
<h2 id="安装-EFB"><a href="#安装-EFB" class="headerlink" title="安装 EFB"></a>安装 EFB</h2><p>远程登录 VPS，找到合适目录执行以下步骤：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/blueset/ehForwarderBot.git</span><br><span class="line"><span class="built_in">cd</span> ehForwarderBot</span><br><span class="line">mkdir storage</span><br><span class="line">chmod +rw ./storage</span><br></pre></td></tr></table></figure>
<p>安装依赖:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install python3-dev python3-setuptools</span><br><span class="line">sudo apt-get install libwebp-dev</span><br><span class="line">sudo apt-get install libmagic-dev ffmpeg</span><br></pre></td></tr></table></figure>
<p>安装 python 依赖:</p>
<p><code>pip3 install -r requirements.txt</code></p></div><a href="/2018/08/17/在Telegram收发微信消息/" class="read-more">...阅读全文</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2018/08/16/TelegramBot初体验/" class="post-title-link">Telegram Bot 初体验</a></h2><div class="post-info">Aug 16, 2018</div><div class="post-content"><blockquote>
<p>Telegram 是一个专注于速度和安全性的 IM 应用，它超级快速，简单和免费。<br>您可以同时在您所有的设备上使用 Telegram - 您的消息可以在任意数量的手机，平板电脑或计算机之间无缝同步。</p>
</blockquote>
<p>这篇文章主要介绍如何开发一个简单 telegram 机器人，我的机器人@happy_mybot。</p>
<h2 id="创建-Telegram-Bot"><a href="#创建-Telegram-Bot" class="headerlink" title="创建 Telegram Bot"></a>创建 Telegram Bot</h2><p><a href="https://core.telegram.org/bots" target="_blank" rel="noopener">bots</a> 这是官网对 bot 的介绍。</p>
<p>要创建一个新的 Bot，要先向 @BotFather 发起会话。发送指令 /newbot 以启动向导。期间，你需要指定这个 Bot 的名称与用户名（用户名必须以 bot 结尾）。完毕之后 @BotFather 会提供给你一个密钥（Token）。</p>
<p>接下来还要对刚刚启用的 Bot 进行进一步的配置：允许 Bot 读取非指令信息、允许将 Bot 添加进群组、以及提供指令列表。</p>
<p>发送 /setprivacy 到 @BotFather，选择刚刚创建好的 Bot 用户名，然后选择 “Disable”。</p>
<p>发送 /setjoingroups 到 @BotFather，选择刚刚创建好的 Bot 用户名，然后选择 “Enable”。</p>
<p>发送 /setcommands 到 @BotFather，选择刚刚创建好的 Bot 用户名，然后发送如下内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">start - say hello</span><br><span class="line">songci	- Get songci</span><br><span class="line">tangshi - Get tangshi</span><br></pre></td></tr></table></figure></div><a href="/2018/08/16/TelegramBot初体验/" class="read-more">...阅读全文</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2018/08/15/树莓派控制LED灯/" class="post-title-link">树莓派控制 LED 灯</a></h2><div class="post-info">Aug 15, 2018</div><div class="post-content"><p>通过树莓派实现 5个 led 灯的循环亮灯，目前设置的亮灯间隔为 0.5s，亮灯循环 10次。</p>
<h2 id="配件"><a href="#配件" class="headerlink" title="配件"></a>配件</h2><p>200Ω 的电阻 5个、发光二极管 LED 5个、面包板、杜邦线</p>
<h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h2><p><img src="https://ws3.sinaimg.cn/large/006tKfTcly1fjlt2uriifj30dx06rmxi.jpg" alt=""></p>
<p>当我们使用 GPIO 引脚作为输出时，Raspberry Pi 将替换上图中的开关和电池。每个引脚可以打开或关闭，或者在计算方面变为 HIGH 或 LOW。当引脚为高电平时，它输出 3.3 伏（3v3）; 当引脚为低电平时，它是关闭的。</p></div><a href="/2018/08/15/树莓派控制LED灯/" class="read-more">...阅读全文</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2018/08/14/利用三极管控制树莓派风扇/" class="post-title-link">利用三极管控制树莓派风扇</a></h2><div class="post-info">Aug 14, 2018</div><div class="post-content"><p>由于只要树莓派通电，散热风扇就会不停的转动，不管树莓派是开机还是关机，而且风扇转动的声音很大。因此，通过监控 CPU 的温度去控制风扇的开关是很有必要的。</p>
<h2 id="配件"><a href="#配件" class="headerlink" title="配件"></a>配件</h2><p>三极管(S8050)、杜邦线、面包板</p>
<h2 id="引脚介绍"><a href="#引脚介绍" class="headerlink" title="引脚介绍"></a>引脚介绍</h2><p><a href="https://www.raspberrypi.org/documentation/usage/gpio-plus-and-raspi2/README.md" target="_blank" rel="noopener">树莓派引脚</a></p>
<p>the numbering of the GPIO：</p>
<p><img src="https://ws4.sinaimg.cn/large/006tKfTcly1fjlu80fjfij30e7045gmk.jpg" alt=""></p>
<p>physical numbering：</p>
<p><img src="https://ws4.sinaimg.cn/large/006tKfTcly1fjlu8c4ilsj30dy03zmy9.jpg" alt=""></p></div><a href="/2018/08/14/利用三极管控制树莓派风扇/" class="read-more">...阅读全文</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2018/08/13/利用raspberrypi搭建下载机/" class="post-title-link">利用 raspberrypi 搭建下载机</a></h2><div class="post-info">Aug 13, 2018</div><div class="post-content"><p>此篇文章介绍利用 raspberrypi 搭建下载机。</p>
<h2 id="aria2"><a href="#aria2" class="headerlink" title="aria2"></a>aria2</h2><p><a href="https://aria2.github.io/manual/en/html/aria2c.html?highlight=session#" target="_blank" rel="noopener">aria2</a> is a utility for downloading files.</p>
<p>安装 aria2：</p>
<p><code>sudo apt-get install aria2</code></p>
<p>aria2 运行的时候需要两个文件，并且需要我们手动配置，一个是配置文件 <strong>aria2.conf</strong>，保存配置，另一个是 <strong>aria2.session</strong>，要不每次 aria2 关闭的时候，之前下载的进度都没了。</p></div><a href="/2018/08/13/利用raspberrypi搭建下载机/" class="read-more">...阅读全文</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2018/08/12/raspberrypi安装/" class="post-title-link">raspberrypi 安装</a></h2><div class="post-info">Aug 12, 2018</div><div class="post-content"><p>此篇文章主要介绍树莓派3代B型从刚入手后进行 Raspbian 系统的安装。</p>
<h2 id="配件"><a href="#配件" class="headerlink" title="配件"></a>配件</h2><ol>
<li>电源线</li>
<li>7寸液晶屏</li>
<li>散热片</li>
<li>蓝牙键鼠</li>
<li>连接显示器 HDMI-HDMI 线</li>
<li>外壳+风扇</li>
<li>32G存储的SD卡，用做硬盘(外需读卡器进行刚开始的格式化)</li>
</ol>
<h2 id="安装系统"><a href="#安装系统" class="headerlink" title="安装系统"></a>安装系统</h2><p><a href="https://www.raspberrypi.org/documentation/installation/noobs.md" target="_blank" rel="noopener">官方安装文档</a></p>
<p>下载 <a href="https://www.raspberrypi.org/downloads/noobs/" target="_blank" rel="noopener">NOOBS</a>;</p>
<p>格式化 SD 卡为 FAT 格式,利用工具<a href="https://www.sdcard.org/downloads/formatter_4/" target="_blank" rel="noopener">SD Card Formatter</a>;</p>
<p>解压 NOOBS.zip 到 SD 卡根目录,利用软件 <a href="http://www.kekaosx.com/zh-cn/" target="_blank" rel="noopener">Keka</a> 来进行解压;</p>
<p>将 SD 卡插入到树莓派对应卡槽中，接通电源，启动系统；</p>
<p>在安装界面选择安装 Raspbian。</p></div><a href="/2018/08/12/raspberrypi安装/" class="read-more">...阅读全文</a></article></li></ul></main><footer><div class="paginator"><a href="/page/2/" class="next">下一页</a></div><div class="copyright"><p>© 2015 - 2019 <a href="http://yoursite.com">Zhang Lei</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>