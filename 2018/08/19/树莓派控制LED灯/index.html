<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 树莓派控制 LED 灯 · freeblog</title><meta name="description" content="树莓派控制 LED 灯 - Zhang Lei"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yoursite.com/atom.xml" title="freeblog"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/leizhang233" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/zhanglei12345" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">树莓派控制 LED 灯</h1><div class="post-info">Aug 19, 2018</div><div class="post-content"><p>通过树莓派实现 5个 led 灯的循环亮灯，目前设置的亮灯间隔为 0.5s，亮灯循环 10次。</p>
<a id="more"></a>
<h2 id="配件"><a href="#配件" class="headerlink" title="配件"></a>配件</h2><p>200Ω 的电阻 5个、发光二极管 LED 5个、面包板、杜邦线</p>
<h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h2><p><img src="https://ws3.sinaimg.cn/large/006tKfTcly1fjlt2uriifj30dx06rmxi.jpg" alt=""></p>
<p>当我们使用 GPIO 引脚作为输出时，Raspberry Pi 将替换上图中的开关和电池。每个引脚可以打开或关闭，或者在计算方面变为<br> HIGH 或 LOW。当引脚为高电平时，它输出 3.3 伏（3v3）; 当引脚为低电平时，它是关闭的。。</p>
<h2 id="接线方式"><a href="#接线方式" class="headerlink" title="接线方式"></a>接线方式</h2><p>树莓派Ground引脚接面包板的 -。</p>
<p>LED正极(长脚)接树莓派的 GPIO 引脚，负极接电阻再接 -。</p>
<p><img src="https://ws2.sinaimg.cn/large/006tKfTcly1fjlt39xn7jj31kw1q24or.jpg" alt=""></p>
<h2 id="控制程序-Python"><a href="#控制程序-Python" class="headerlink" title="控制程序(Python)"></a>控制程序(Python)</h2><p>可通过 <a href="#jump">raspberry-gpio-python</a> 查看接口介绍。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> RPi.GPIO <span class="keyword">as</span> GPIO</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">channels = [<span class="number">13</span>,<span class="number">21</span>,<span class="number">16</span>,<span class="number">20</span>,<span class="number">26</span>]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">setup_GPIO</span><span class="params">()</span>:</span></span><br><span class="line">    GPIO.setmode(GPIO.BCM)</span><br><span class="line">    GPIO.setwarnings(<span class="keyword">False</span>)</span><br><span class="line">    GPIO.setup(channels, GPIO.OUT)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">on_led</span><span class="params">(i)</span>:</span></span><br><span class="line">    GPIO.output(i, GPIO.HIGH)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">off_led</span><span class="params">(i)</span>:</span></span><br><span class="line">    GPIO.output(i, GPIO.LOW)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">control_led</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> channels:</span><br><span class="line">                on_led(i)</span><br><span class="line">                time.sleep(<span class="number">0.5</span>)</span><br><span class="line">                off_led(i)</span><br><span class="line">        <span class="keyword">except</span> (KeyboardInterrupt,Exception):</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    setup_GPIO()</span><br><span class="line">    control_led()</span><br><span class="line">    <span class="comment"># Ctrl + C 终止一次之后，发现下次程序再运行的时候，上次终止时的那个LED灯也是亮的，所以在终止之后加了全部设置为LOW</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> channels:</span><br><span class="line">        off_led(i)</span><br><span class="line">    GPIO.cleanup()</span><br></pre></td></tr></table></figure></p>
<h2 id="raspberry-gpio-python"><a href="#raspberry-gpio-python" class="headerlink" title="raspberry-gpio-python"></a><a name="jump">raspberry-gpio-python</a></h2><p><a href="https://pypi.python.org/pypi/RPi.GPIO" target="_blank" rel="noopener">官网</a></p>
<h3 id="RPi-GPIO-Installation"><a href="#RPi-GPIO-Installation" class="headerlink" title="RPi.GPIO Installation"></a>RPi.GPIO Installation</h3><p>The RPi.GPIO module is installed by default in Raspbian. To make sure that it is at the latest version:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get update</span><br><span class="line">$ sudo apt-get install python-rpi.gpio python3-rpi.gpio</span><br></pre></td></tr></table></figure></p>
<p>It is recommended that you install RPi.GPIO using the pip utility as superuser (root):<br><code>sudo pip install RPi.GPIO</code></p>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p>导入:<br><code>import RPi.GPIO as GPIO</code></p>
<p>编写 IO 引脚的方式<br>设置:<br><code>GPIO.setmode(GPIO.BOARD)</code> 或 <code>GPIO.setmode(GPIO.BCM)</code></p>
<blockquote>
<p>BCM 方式是按照 GPIO 引脚编号，BOARD 方式是按照物理编号</p>
</blockquote>
<p>获取:<br><code>mode = GPIO.getmode()</code></p>
<blockquote>
<p>The mode will be GPIO.BOARD, GPIO.BCM or None</p>
</blockquote>
<p>警告:<br>GPIO 可能有多个脚本/电路，如果 RPi.GPIO 检测到引脚已配置为默认值（输入）以外的其他值，则在尝试配置脚本时会发出警告。要禁用这些警告：<br><code>GPIO.setwarnings(False)</code></p>
<p>设置一个 channel：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># input</span></span><br><span class="line">GPIO.setup(channel, GPIO.IN)</span><br><span class="line"><span class="comment"># output</span></span><br><span class="line">GPIO.setup(channel, GPIO.OUT)</span><br><span class="line"><span class="comment"># initial</span></span><br><span class="line">GPIO.setup(channel, GPIO.OUT, initial=GPIO.HIGH)</span><br><span class="line"><span class="comment">#release 0.5.8 onwards</span></span><br><span class="line">chan_list = [<span class="number">11</span>,<span class="number">12</span>] 	<span class="comment">#   chan_list = (11,12)</span></span><br><span class="line">GPIO.setup(chan_list, GPIO.OUT)</span><br></pre></td></tr></table></figure></p>
<p>读取引脚的值：<br><code>GPIO.input(channel)</code></p>
<blockquote>
<p>This will return either 0 / GPIO.LOW / False or 1 / GPIO.HIGH / True.</p>
</blockquote>
<p>设置引脚输出的的状态：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">GPIO.output(channel, state)</span><br><span class="line"><span class="comment">#release 0.5.8 onwards</span></span><br><span class="line">chan_list = [<span class="number">11</span>,<span class="number">12</span>] </span><br><span class="line">GPIO.output(chan_list, GPIO.LOW)</span><br><span class="line">GPIO.output(chan_list, (GPIO.HIGH, GPIO.LOW))</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>State can be 0 / GPIO.LOW / False or 1 / GPIO.HIGH / True.</p>
</blockquote>
<p>在脚本结束的时候做清理：<br><code>GPIO.cleanup()</code></p>
</div></article></div></main><footer><div class="paginator"><a href="/2018/08/19/我的24/" class="prev">PREV</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'https-zhanglei12345-github-io';
var disqus_identifier = '2018/08/19/树莓派控制LED灯/';
var disqus_title = '树莓派控制 LED 灯';
var disqus_url = 'http://yoursite.com/2018/08/19/树莓派控制LED灯/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//https-zhanglei12345-github-io.disqus.com/count.js" async></script><div class="copyright"><p>© 2015 - 2018 <a href="http://yoursite.com">Zhang Lei</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>